<div class="text-analyzer">
  <h2>Text Analyzer</h2>

  <div class="input-section">
    <mat-form-field appearance="fill">
      <mat-label>Enter text</mat-label>
      <textarea
        matInput
        #inputArea
        cdkTextareaAutosize
        #autosize="cdkTextareaAutosize"
        cdkAutosizeMinRows="3"
        cdkAutosizeMaxRows="10"
        [formControl]="inputControl"
        (input)="onInputChange($event)"
        placeholder="Type something..."
      ></textarea>
    </mat-form-field>
    <span
      class="ghost-prediction"
      *ngIf="
        predictedWord && !isLoadingPrediction && inputControl.value?.trim()
      "
    >
      {{ predictedWord }}
    </span>
    <mat-hint
      *ngIf="isLoadingPrediction && !errorMessage"
      class="predicting-hint"
      >Predicting...</mat-hint
    >
  </div>
  <div class="button-section">
    <button
      mat-raised-button
      color="primary"
      (click)="analyzeTextAttention()"
      [disabled]="isLoadingAttention || !inputControl.value?.trim()"
    >
      <mat-spinner
        *ngIf="isLoadingAttention"
        diameter="20"
        style="display: inline-block; margin-right: 8px"
      ></mat-spinner>
      {{ isLoadingAttention ? "Analyzing..." : "Analyze Attention" }}
    </button>
  </div>

  <div
    *ngIf="predictedWord && !isLoadingPrediction && !inputControl.value?.trim()"
    class="prediction-section"
    style="display: none"
  >
    <h3>Next Word Prediction (Old):</h3>
    <p>
      <strong>{{ predictedWord }}</strong>
    </p>
  </div>
</div>
